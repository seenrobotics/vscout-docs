

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tree Hygiene &mdash; vscout 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Style Guide" href="style-guide.html" />
    <link rel="prev" title="seenrobotics’ Core Values" href="values.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> vscout
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">vscout</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to vscout</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Contributing</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#developing-for-seenrobotics">Developing for seenrobotics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="code-of-conduct.html">Code of Conduct</a></li>
<li class="toctree-l3"><a class="reference internal" href="values.html">seenrobotics’ Core Values</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Tree Hygiene</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-git">Using git</a></li>
<li class="toctree-l4"><a class="reference internal" href="#commit-messages">Commit Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#getting-a-code-review">Getting a code review</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-review-code">How to review code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#landing-a-patch">Landing a patch</a></li>
<li class="toctree-l4"><a class="reference internal" href="#regressions-in-functionality">Regressions in functionality</a></li>
<li class="toctree-l4"><a class="reference internal" href="#revert-commits">Revert commits</a></li>
<li class="toctree-l4"><a class="reference internal" href="#handling-breaking-changes">Handling breaking changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="style-guide.html">Style Guide</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">vscout</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Contributing</a> &raquo;</li>
        
      <li>Tree Hygiene</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/contributing/tree-hygiene.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tree-hygiene">
<h1>Tree Hygiene<a class="headerlink" href="#tree-hygiene" title="Permalink to this headline">¶</a></h1>
<p>This page covers how to land a PR and other aspects of writing code for
seenrobotics other than the actual writing of the code. For guidance on
formatting your code, see the <a class="reference external" href="STYLE_GUIDE.md">Style guide</a>.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The general process for submitting code to a seenrobotics repository is
as follows:</p>
<ol class="arabic simple">
<li><p>Fork the repository on GitHub</p></li>
<li><p>If there is not already an issue covering the work you are
interested in doing, and if you think the work you are doing is
likely to be a non-trivial effort (e.g. you are creating a new
feature, or otherwise introducing a new command, or intending to
make a potentially breaking change, or refactoring a library), then
file a new bug to describe the issue you are addressing.</p></li>
<li><p>If the work you are doing is likely to be a non-trivial effort (see
above), then discuss your design on the issue. You may find it
useful to create a Google Doc to solicit feedback. You may wish to
discuss the topic on the contributors <a class="reference external" href="https://gitter.im/seenrobotics/vscout-cli">Gitter
channel</a>. The more
buy-in you get from the rest of the team (especially the relevant
leads), the easier the rest of the process will be. You can put the
label “proposal” on your issue to indicate that you have a design up
for discussion in the issue.</p></li>
<li><p>Create a branch on your GitHub fork of the repository, and implement
your change.</p></li>
<li><p>You must follow the guidelines described in the <a class="reference external" href="STYLE_GUIDE.md">Style
guide</a>.</p></li>
<li><p>Submit this branch as a PR to the relevant seenrobotics repository.</p></li>
<li><p>Get your code reviewed (see below). You should probably reach out to
the relevant expert(s) for the areas you touched and ask them to
review your PR directly. GitHub sometimes recommends specific
reviewers; if you’re not sure who to ask, that’s probably a good
place to start.</p></li>
<li><p>Make sure your PR passes all the pre-commit tests from Azure
Pipelines.</p></li>
<li><p>Once everything is green and you have an LGTM, land your patch.</p></li>
<li><p>Watch the post-commit tests on the dashboard to make sure everything
passes. If anything goes wrong, revert your patch and study the
problem.</p></li>
</ol>
</div>
<div class="section" id="using-git">
<h2>Using git<a class="headerlink" href="#using-git" title="Permalink to this headline">¶</a></h2>
<p>Assuming your environment has been configured correctly, follow these
steps to start working on a patch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git fetch upstream
git checkout upstream/master -b name_of_your_branch
Hack away.
git commit -a -m <span class="s2">&quot;&lt;your informative commit message&gt;&quot;</span>
git push origin name_of_your_branch
</pre></div>
</div>
<p>GitHub provides you with a link for submitting the pull request in the
message output by git push.</p>
<p>Please make sure all your patches have detailed commit messages
explaining what the problem was and what the solution is.</p>
</div>
<div class="section" id="commit-messages">
<h2>Commit Messages<a class="headerlink" href="#commit-messages" title="Permalink to this headline">¶</a></h2>
<p>The repository’s log of git history shows commits either by the first 50
characters or in more detail with each commit message. Going through the
log should be similar to reading a story. In order to do this, our
commit messages are specifically structured in order to aid those
looking back at the commit history. We use the Conventional Commits
specification to write our commit messages, which can be found
<a class="reference external" href="https://www.conventionalcommits.org/en/v1.0.0-beta.4/">here</a>.</p>
</div>
<div class="section" id="getting-a-code-review">
<h2>Getting a code review<a class="headerlink" href="#getting-a-code-review" title="Permalink to this headline">¶</a></h2>
<p>Every PR must be code-reviewed before check-in, including things like
rolling a dependency. Getting a review means that a regular seenrobotics
contributor (someone with commit access) has written a comment saying
“LGTM” on your PR, and you have addressed all their feedback. (“LGTM”
means “Looks Good To Me”.) Code review serves many critical purposes.
There’s the obvious purpose: catching errors. Even the most experienced
engineers frequently make errors that are caught by code review. But
there are also many other benefits of code reviews: - It spreads
knowledge among the team. Since every line of code will have been read
by two people, it’s more likely that once you move on, someone else will
understand the code. - It keeps you honest. Knowing that someone will be
reading your code, you are less tempted to cut corners and more
motivated to write code you are proud of. - It exposes you to different
modes of thinking. Your code reviewer has probably not thought about the
problem in the same way you have, and so may have a fresh perspective
and may find you a better way to solve the problem. We recommend you
consider these suggestions for addressing code review comments on your
PR. If you’re working on a big patch, don’t hesitate to get reviews
early, before you’re ready to check code in. Also, don’t hesitate to ask
for multiple people to review your code, and don’t hesitate to provide
unsolicited comments on other people’s PRs. The more reviews the better.
A reviewer may in some circumstances consider the code satisfactory
without having fully reviewed or understood it. If a reviewer has not
fully reviewed the code, they admit to this by saying “RSLGTM” rather
than just “LGTM”. If you feel your code needs a real review, please find
someone to actually review it. (“RSLGTM” means “Rubber Stamp Looks Good
To Me”.)</p>
</div>
<div class="section" id="how-to-review-code">
<h2>How to review code<a class="headerlink" href="#how-to-review-code" title="Permalink to this headline">¶</a></h2>
<p>Reviewers should carefully read the code and make sure they understand
it. A reviewer should check the code for both high level concerns, such
as whether the code’s structure makes sense, as well as readability and
adherence to the <a class="reference external" href="STYLE_GUIDE.md">Style guide</a>. Use these best
practices when reviewing code and providing comments. As a reviewer, you
are the last line of defense. Take a step back. What problem is the PR
trying to solve? Is it a real problem? What other solutions could we
consider? What could we do to make this even better? Once you are
satisfied with the contribution, and only once you are satisfied, write
a comment that includes the phrase LGTM (or use the GitHub “Approval”
mechanism). If you feel like you are being worn down, hand the review to
someone else. Consider our <a class="reference external" href="../CODE_OF_CONDUCT.md">conflict resolution
policy</a> if you feel like you are being forced
to agree to something you don’t like. Reviewers should not give an LGTM
unless the patch has tests that verify all the affected code, or unless
a test would make no sense. If you review a patch, you are sharing the
responsibility for the patch with its author. You should only give an
LGTM if you would feel confident answering questions about the code. If
you are 100% sure the patch is good and has no issues but you haven’t
really fully reviewed or understood it, you can give it a rubber-stamp
review by marking it RSLGTM. If you mark a patch as RSLGTM, you are
still sharing the responsibility for the patch with its author.
Reviewing a patch as RSLGTM should be a rare event.</p>
</div>
<div class="section" id="landing-a-patch">
<h2>Landing a patch<a class="headerlink" href="#landing-a-patch" title="Permalink to this headline">¶</a></h2>
<p>Once you have submitted your patch and received your LGTM, if you do not
have commit access to the repository yet, then wait for one of the
project maintainers to submit it for you. If you do have access, you can
just click the green “Merge pull request” button on the GitHub UI of
your pull request. Please squash commits (GitHub does this for you by
default normally). When you squash commits, by default, GitHub will
concatenate all your commit messages to form a unified commit message.
This often yields an overly verbose commit message with many unhelpful
entries (e.g. “fix typo”). Please double-check (and hand-edit if
necessary) your commit message before merging such that the message
contains a helpful description of the overall change.</p>
</div>
<div class="section" id="regressions-in-functionality">
<h2>Regressions in functionality<a class="headerlink" href="#regressions-in-functionality" title="Permalink to this headline">¶</a></h2>
<p>If a check-in has caused a regression on the trunk, roll back the
check-in (even if it isn’t yours) unless doing so would take longer than
fixing the bug. When the trunk is broken, it slows down everyone else on
the project.</p>
<p>If things are broken, the priority of everyone on the team should be
helping the team fix the problem. Someone should own the issue, and they
can delegate responsibilities to others on the team. Once the problem is
resolved, write a postmortem. Postmortems are about documenting what
went wrong and how to avoid the problem (and the entire class of
problems like it) from recurring in the future. Postmortems are
emphatically not about assigning blame. These postmortems go in the
<a class="reference external" href="postmortems/">/docs/postmortems folder</a> with this filename format in
the markdown format:</p>
<p><code class="docutils literal notranslate"><span class="pre">YYYY_MM_DD_postmortem_title.md</span></code></p>
<p>Any images for these postmortems go in the
<a class="reference external" href="postmortems/img/">/docs/postmortems/img</a> folder with this filename
format:</p>
<p><code class="docutils literal notranslate"><span class="pre">YYYY_MM_DD_postmortem_img_title.jpg</span></code></p>
<p>There is no shame in making mistakes.</p>
</div>
<div class="section" id="revert-commits">
<h2>Revert commits<a class="headerlink" href="#revert-commits" title="Permalink to this headline">¶</a></h2>
<p>Avoid “Revert”Revert “Revert”Revert “Fix foo””“” commit messages Please
limit yourself to one “Revert” per commit message, otherwise we won’t
have any idea what is actually landing. Is it putting us back to where
we were before? Is it adding new code? Is it a controversial new feature
that actually caused a regression before but is now fixed (we hope)?
Only use “Revert” if you are actually returning us to a known-good
state. When you later revert the revert, just land the PR afresh with
the original commit message, possibly updated with the information since
collected (and ideally, including a link to the original PR and to the
revert PR so that people can follow the breadcrumbs later).</p>
</div>
<div class="section" id="handling-breaking-changes">
<h2>Handling breaking changes<a class="headerlink" href="#handling-breaking-changes" title="Permalink to this headline">¶</a></h2>
<p>In general, we want to avoid making changes to vscout that force
developers and users to change in order to upgrade to new versions of
the software. Sometimes, however, doing this is necessary for the
greater good. In those cases, to make a change that will require
developers to change their code: Send a message to the <a class="reference external" href="https://gitter.im/seenrobotics/vscout-cli">Gitter
channel</a> to socialize your
proposed change. The purpose of this message is to see if you can get
consensus around your change from the vscout developers with repository
access. You are not telling people that the change will happen, you are
asking them for permission. The message should include the following: -
A subject line that clearly summarizes the proposed change and sounds
like it matters. Prefix the subject line with [Breaking Change]. - A
summary of each change you propose. - A brief justification for the
change. - A link to the relevant issue, and any PRs you may have already
posted relating to this change. - Clear mechanical steps for porting the
code from the old form to the new form, if possible. If not possible,
clear steps for figuring out how to port the code. - A sincere offer to
help port code, which includes the preferred venue for contacting the
person who made the change. - A request that people notify you if this
change will be a problem, perhaps by discussing the change in the issue
tracker on the pull request. - You may not have permission to post to
this list yet. If you do not, please contact
<a class="reference external" href="mailto:seangdsouza&#37;&#52;&#48;gmail&#46;com">Sean</a>.</p>
<p>If the vscout developers agree that the benefits of changing the program
outweigh the stability costs, you can proceed with the normal code
review process for making changes. You should leave some time between
steps 2 and 3 (at a bare minimum 24 hours during the work week so that
people in all time zones have had a chance to see it, but ideally a week
or so).</p>
<p>Where possible, even “breaking” changes should be made in a
backwards-compatible way. When doing this, include a description of how
to transition in the deprecation notice, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FooInterface</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated: &#39;FooInterface has been deprecated because ...; it is recommended that you transition to the new FooDelegate.&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>If you use deprecated, make sure to remember to actually remove the
feature a few months later (after the next stable release), do not just
leave it forever!</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="style-guide.html" class="btn btn-neutral float-right" title="Style Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="values.html" class="btn btn-neutral float-left" title="seenrobotics’ Core Values" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, seenrobotics

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>